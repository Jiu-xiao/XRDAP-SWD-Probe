# XRDAP-SWD-Probe

Open SWD probe (discrete + FPGA) with XRDAP adapter

开源的SWD探针（分立元件 + FPGA），用于 XRDAP 调试器

## 目的

实现一个成本低、简单、性能稳定的 SWD 数字逻辑前端，为任何带 SPI 的主机提供高速 SWD 通信能力。

## 问题

- SWD 事务为 46 位，使用 SPI 存在字节对齐困难
- 传输中需换向（Turn），传统纯软件方案在高频下容易打架
- ACK 分支多，难以充分利用 SPI 的并行与 DMA

## 思路

- **固定帧**：主机每次固定发送 48 位（46 + 2 位 pad），直接用 DMA
- **门控时钟**：根据 ACK 在第 11 位后门控 SWCLK（SCK→SWCLK），丢弃无效的后 34 位
- **SWDIO 窗口驱动**：仅在“请求 + 写数据”阶段驱动，其余位**高阻**；发送端预置为“1”（空闲高）以确保换向安全和高频稳定

## 进展

- ✅ 方案敲定
- ⏳ FPGA 前端原型
- ⏳ 基础仿真用例
- ⏳ 分立元件原理图绘制
- ⏳ PCB 设计
- ⏳ 实物测试
